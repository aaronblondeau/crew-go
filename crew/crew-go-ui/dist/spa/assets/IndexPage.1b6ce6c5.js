import{Q as N}from"./QPage.85d9f555.js";import{F as q,r as m,H as f,ag as y,M as e,f as d,J as l,ah as Q,ai as $,K as P,aj as R,o as z,L as S,ak as _,al as w,am as C,an as b,ao as K,ap as M,aq as D,N as x,I as U}from"./index.02f105df.js";import{_ as j,u as E,Q as F,a as h,t as O,b as A,n as H}from"./ModifyTaskGroupCard.771bbf4d.js";import"./QMenu.cb96b72d.js";import"./QForm.a18394a1.js";const J=q({__name:"CreateTaskGroupModalButton",emits:["onCreate"],setup(u,{emit:a}){function v(g){s.value=!1,a("onCreate",g)}const s=m(!1);return(g,r)=>(f(),y($,null,[e(d,{onClick:r[0]||(r[0]=c=>s.value=!0),color:"primary",icon:"add",label:"New Task Group"}),e(Q,{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=c=>s.value=c)},{default:l(()=>[e(j,{style:{width:"700px","max-width":"80vw"},onOnCreate:v})]),_:1},8,["modelValue"])],64))}}),L={class:"full-width"},W={key:0,class:"col-12 col-sm-3"},X={class:"q-table__title"},Y=q({__name:"TaskGroupTable",props:{title:{type:String,required:!1,default:"Task Groups"},hideCreateButtons:{type:Boolean,required:!1,default:!1},embedded:{type:Boolean,required:!1,default:!1}},setup(u){const a=u,v=E(),s=P(),g=R(),r=m(!0),c=m([]),n=m({page:parseInt(s.currentRoute.value.query.page?s.currentRoute.value.query.page:"1"),rowsPerPage:s.currentRoute.value.query.page_size?parseInt(s.currentRoute.value.query.page_size):20,rowsNumber:0}),p=m(s.currentRoute.value.query.q||""),B=[{name:"id",field:"id",label:"Id",align:"left"},{name:"name",field:"name",label:"Name",align:"left"},{name:"actions",field:"",label:"Actions",align:"left"}];function G(t){s.push({name:"task_group",params:{taskGroupId:t.id}})}async function T(){p.value="",await i()}const I=async({pagination:t})=>{n.value=t,await i()};async function i(){try{if(n.value){r.value=!0;const t=await v.getTaskGroups(n.value.page,n.value.rowsPerPage,p.value);n.value.rowsNumber=t.count,c.value=t.taskGroups,s.push({query:{...g.query,q:p.value,page:n.value.page,page_size:n.value.rowsPerPage}})}}catch(t){H(t)}finally{r.value=!1}}return z(async()=>{await i()}),(t,k)=>{const V=S("router-link");return f(),y("div",L,[e(A,{title:a.title,rows:c.value,columns:B,pagination:n.value,"onUpdate:pagination":k[1]||(k[1]=o=>n.value=o),"row-key":"id",loading:r.value,flat:a.embedded,onRequest:I,class:"full-width","wrap-cells":""},{top:l(()=>[_("div",{class:w(["row full-width text-center",{"text-left":!t.$q.screen.xs}])},[a.title?(f(),y("div",W,[_("div",X,C(a.title),1)])):b("",!0),_("div",{class:w({"q-mt-sm":t.$q.screen.xs,"col-12 col-sm-5":a.title&&!u.hideCreateButtons,"col-12 col-sm-9":a.title&&u.hideCreateButtons,"col-12 col-sm-8":!a.title&&!u.hideCreateButtons,"col-12":!a.title&&a.hideCreateButtons})},[e(K,{type:"text",modelValue:p.value,"onUpdate:modelValue":k[0]||(k[0]=o=>p.value=o),placeholder:"Search",filled:"",dense:"",onKeyup:M(i,["enter"])},{after:l(()=>[e(d,{round:"",dense:"",flat:"",icon:"search",onClick:i}),e(d,{round:"",dense:"",flat:"",icon:"clear",onClick:T}),e(d,{round:"",dense:"",flat:"",icon:"refresh",onClick:i})]),_:1},8,["modelValue","onKeyup"])],2),a.hideCreateButtons?b("",!0):(f(),y("div",{key:1,class:w(["col-12 col-sm-4 text-center",{"text-right":!t.$q.screen.xs,"q-mt-sm":t.$q.screen.xs}])},[e(J,{onOnCreate:G})],2))],2)]),body:l(o=>[e(F,{props:o,valign:"top"},{default:l(()=>[e(h,{key:"id",props:o},{default:l(()=>[e(d,{flat:"",icon:"content_copy",size:"sm",onClick:Z=>D(O)("Id",o.row.id)},null,8,["onClick"]),e(V,{to:{name:"task_group",params:{taskGroupId:o.row.id}}},{default:l(()=>[x(C(o.row.id),1)]),_:2},1032,["to"])]),_:2},1032,["props"]),e(h,{key:"name",props:o},{default:l(()=>[x(C(o.row.name),1)]),_:2},1032,["props"]),e(h,{key:"actions",props:o},{default:l(()=>[e(d,{flat:"",to:{name:"task_group",params:{taskGroupId:o.row.id}},color:"purple",size:"sm",icon:"launch"},null,8,["to"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["title","rows","pagination","loading","flat"])])}}}),le=q({__name:"IndexPage",setup(u){return(a,v)=>(f(),U(N,{padding:"",class:"row items-start justify-evenly"},{default:l(()=>[e(Y)]),_:1}))}});export{le as default};
